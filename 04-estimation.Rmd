# Numerical Translation and Estimation {#estimation}

```{r estimation-setup, message=FALSE, warning=FALSE}
library(tidyverse)
library(patchwork)
library(here)
library(readr)
library(knitr)
library(kableExtra)
library(pander)
```

```{r estimation-data, message=FALSE, warning=FALSE}
estimation_model_data <- read.csv(here("data/03-estimation/estimation-model-data.csv"))
estimation_simulated_data <- read.csv(here("data/03-estimation/estimation-simulated-data.csv")) %>%
  mutate(x = x - 3000)
estimation_scenario_text <- read.csv(here("data/03-estimation/estimation-scenario-text.csv"))
estimation_parameters <- read.csv(here("data/03-estimation/estimation-parameters.csv"))
estimation_questions <- read.csv(here("data/03-estimation/estimation-questions.csv"))
population_estimates_data <- read.csv(here("data/03-estimation/first-level-population-estimates.csv"))
```

## Introduction

+ Such complex inferential processes involve quantitatively transforming the information in the display (e.g., mentally transforming from a linear to logarithmic scale or calculating the difference between two or more data points; Cleveland, 1984, 1985).

**Graph Comprehension**

+ Literal reading the data (Elementary level questions)
+ Reading between the data (Intermediate level questions)
+ Reading beyond the data (Advanced level questions)

**Rounding Estimates & Anchoring**

## Data Generation

```{r estimation-simulated-data, fig.height=9, fig.width=9, message=FALSE, warning=FALSE}

# dataset 1
simulated_plot_linear1 <- estimation_simulated_data %>%
  filter(dataset == "dataset1") %>%
  mutate(scale = "Linear") %>%
  ggplot(aes(x = x, y = y)) +
  geom_point() +
  geom_line(aes(y = y0), size = 0.5, color = "gray30", linetype = "dashed") +
  facet_wrap(~scale) +
  theme_bw() +
  theme(aspect.ratio = 1) +
  scale_y_continuous(limits = c(100, 55000),
                     breaks = seq(0, 55000, 5000),
                     labels = scales::comma,
                     minor_breaks = c()) +
  ggtitle("Data set 1")

simulated_plot_log1 <- estimation_simulated_data %>%
  filter(dataset == "dataset1") %>%
  mutate(scale = "Log2") %>%
  ggplot(aes(x = x, y = y)) +
  geom_point() +
  geom_line(aes(y = y0), size = 0.5, color = "gray30", linetype = "dashed") +
  facet_wrap(~scale) +
  theme_bw() +
  theme(aspect.ratio = 1) +
  scale_y_continuous(trans = "log2",
                     limits = c(100, 55000),
                     breaks = 2^seq(0,10000,1),
                     labels = scales::comma,
                     minor_breaks = c())

# dataset 2
simulated_plot_linear2 <- estimation_simulated_data %>%
  filter(dataset == "dataset2") %>%
  mutate(scale = "Linear") %>%
  ggplot(aes(x = x, y = y)) +
  geom_point() +
  geom_line(aes(y = y0), size = 0.5, color = "gray30", linetype = "dashed") +
  facet_wrap(~scale) +
  theme_bw() +
  theme(aspect.ratio = 1) +
  scale_y_continuous(limits = c(100, 55000),
                     breaks = seq(0, 55000, 5000),
                     labels = scales::comma,
                     minor_breaks = c()) +
  ggtitle("Data set 2")

simulated_plot_log2 <- estimation_simulated_data %>%
  filter(dataset == "dataset2") %>%
  mutate(scale = "Log2") %>%
  ggplot(aes(x = x, y = y)) +
  geom_point() +
  geom_line(aes(y = y0), size = 0.5, color = "gray30", linetype = "dashed") +
  facet_wrap(~scale) +
  theme_bw() +
  theme(aspect.ratio = 1) +
  scale_y_continuous(trans = "log2",
                     limits = c(100, 55000),
                     breaks = 2^seq(0,10000,1),
                     labels = scales::comma,
                     minor_breaks = c())

(simulated_plot_linear1 + simulated_plot_log1) /
(simulated_plot_linear2 + simulated_plot_log2)
```

## Scenarios & Questions


**Tribble Scenario:**

*"Hi, we're Tribbles! We were taken from our native planet, Iota Germinorum IV, and brought abroad Starfleet in stardate 4500. A Starfleet scientist, Edward Larkin, genetically engineered us to increase our reproductive rate in an attempt to solve a planetary food shortage. The Tribble population on Starfleet over the next 50 Stardates (equivalent to 1 week universe time) is illustrated in the graph. We need your help answering a few questions regarding the population of Tribbles."*
    
**Ewok Scenario:**

*"Hi, we're Ewoks! We are native to the forest moon of Endor. After the Galactic Civil War, some Ewoks traveled offworld to help Rebel veterans as 'therapy Ewoks' and began to repopulate. The Ewok population After the Battle of Yavin (ABY) is illustrated in the graph. We need your help answering a few questions regarding the population of Ewoks offworld."*

```{r estimation-questions-table}
estimation_questions %>%
  filter(q_id != "scenario") %>%
  pivot_wider(id_cols = "q_id",
              names_from = "creature",
              values_from = "qtext") %>%
  mutate(q_id = c("Open Ended", "Elementary Q1", "Elementary Q2", "Intermediate Q1", "Intermediate Q2", "Intermediate Q3")) %>%
  knitr::kable("latex", col.names = c("Question type", "Tribble scenario", "Ewok scenario"),
               caption = "Estimation Questions")  %>%
  column_spec(1, width = "10em")
```

## Study Design

## Participants

+ 302 Participants answered all 12 questions

## Results

### Open Ended

+ Word clouds go here

### Elementary Q1: Estimation of population

#### Direct estimate in date 10

#### First level estimates for dates 10, 20, and 40

### Elementary Q2: Estimation of date

### Intermediate Q1: Additive increase in population

### Intermediate Q2: Multiplicative change in population

### Intermeidate Q3: Time until population doubles

## Discussion and Conclusion

+ Understanding logarithmic logic is difficult
  + Misunderstanding in QI1 and QI2
+ Anchoring, anchoring, anchoring!
  + On the log2 scale, but on base 10 is still strong
+ Participants were reading the data points rather than the trends, with a few exceptions
+ Log vs Linear Scale
  + linear scale ad greater variability in general (not always)
  + Log scale was occasionally more accurate (depends on magnitude and location of point in relation to the grid lines)
  + Depended on the values being asked.
  + Participants more likely to estimate between grid lines on the linear scale
